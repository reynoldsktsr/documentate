<!DOCTYPE html>
<html ng-app>
<head>
	<title>Firebase Temporary Setup</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script>
	<script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
	<script>
		var firebase = new Firebase('https://documentate.firebaseio.com/');
		// var usersRef = firebase.child("users");
		// usersRef.set({
		//   Kieran: {
		//     date_of_birth: "nah",
		//     full_name: "Alan Turing"
		//   },
		//   gracehop: {
		//     date_of_birth: "December 9, 1906",
		//     full_name: "Grace Hopper"
		//   }
		// });
		// var postsRef = firebase.child('posts');
		// var newPostRef = postsRef.push();
		// newPostRef.set({
		// 	author: "kieran",
		// 	title: "testing"
		// });
	</script>
</head>
<body>	
	<div id="angular_Setup">
		<label>Name:</label>
		<input type="text" ng-model="yourName" placeholder="Enter a name here" />
		<h1>Hello {{yourName}}!</h1>
	</div>
	<hr />
	<div id="firebase_Set_Data">
		<form name="firebase_Set_Data_Form">
			<div class="formElement">
				<label for="data_Type">Data Type: </label>
				<select id="data_Type">
					<option value="meeting_notes">Meeting Notes</option>
					<option value="general_notes">General Notes</option>
				</select>
			</div>
			<div class="formElement">
				<label for="data_Title">Data Title: </label>
				<input type="text" id="data_Title" />
			</div>
			<div class="formElement">
				<label for="data_Content">Data Content:</label>
				<textarea id="data_Content"></textarea>
			</div>
			<div class="formButtom">
				<button type="submit" onclick="submitThisForm(this.form);">Submit</button>
			</div>
		</form>
		<div id="firebase_Set_Data_Result"></div>
	</div>

</body>
<script type="text/javascript">
	function submitThisForm(form) {
		var formName = form.name;
		var formRef = form.data_Type.value;
		var formModel;
		// switch(formName) {
		// 	case "firebase_Set_Data_Form":
		// 		formModel = 1;
		// 		break;
		// }
		var firebaseRef = firebase.child(formRef);
		var newFirebaseRef = firebaseRef.push();
		newFirebaseRef.set({
			title: form.data_Title.value,
			content: form.data_Content.value,
			uploadedAt: Date()
		});
	};
	var query = new Firebase('https://documentate.firebaseio.com/meeting_notes');

	query.orderByKey().on('value', function(snapshot) {
		document.getElementById('firebase_Set_Data_Result').innerHTML = "";
		console.log(snapshot.val());
		for (var key in snapshot.val()) {
			console.log(snapshot.val()[key]);
			var entry = document.createElement('div');
			var title = document.createElement('h3');
			var content = document.createElement('p');
			var createdAt = document.createElement('p');

			title.innerHTML = snapshot.val()[key].title;
			content.innerHTML = snapshot.val()[key].content;
			createdAt.innerHTML = "Created At: " + snapshot.val()[key].uploadedAt + "<hr>";
			entry.appendChild(title);
			entry.appendChild(content);
			entry.appendChild(createdAt);
			document.getElementById('firebase_Set_Data_Result').appendChild(entry);

		}
		// console.log(snapshot.val());
		// document.getElementById('firebase_Set_Data_Result').innerHTML = snapshot.val();
	}, function(errorObject) {
		conosle.log('Error: ' + errorObject.code);
	})
</script>
</html>